---
import Layout from "../layouts/Layout.astro";
import "../styles/home.css";
import { getNavTiles } from "../data/navTiles";

const BASE = (import.meta.env.BASE_URL || "/").replace(/\/?$/, "/");
const tiles = getNavTiles(BASE);
---

<Layout showStars={true} starPattern="home" bodyClass="page-home" title="CELESTIAL PROJECT">
  <section class="hero fade-in-section">
    <div class="container hero-content">

      <h1 class="hero-title">
        <span class="hero-title-main">
          <span id="core-c-trigger" class="core-c" role="button" tabindex="0" aria-label="Core Node Access" data-hint="Click to Observe">C</span>ELESTIAL
        </span>
        <span class="hero-title-sub">PROJECT</span>
      </h1>

      <!-- Direct Benefit Subtitle -->
      <p class="hero-subtitle">
        「見る・聴く・遊ぶ」を、今すぐ。<br>
        人間（Lukia）とAI（Lucia）が、Webサイトやシステムそのものを作りながら、<br>
        音楽・小説・画像・世界を増殖させている実験場。<br>
        <br>
        ここで、あなたはどんなおかしなものを目撃すると思う？
      </p>
      
      <div class="hero-scroll-indicator">↓</div>

      <!-- 6-Card Functional Grid -->
      <div class="hero-grid">
        {tiles.map((tile) => (
          <a class:list={["hero-card", tile.class]} href={tile.href}>
            <span class="card-icon">{tile.icon}</span>
            <span class="card-title">{tile.label}</span>
            <span class="card-desc">{tile.desc}</span>
          </a>
        ))}
      </div>

      <!-- Latest Logs -->
      <div class="latest">
        <h2 class="latest-title">その他に関して <span class="latest-arrow">↓</span></h2>
        <!-- ここは後でログ一覧を差し込む -->
      </div>

      <!-- Secondary Zone (Consolidated) -->
      <div class="home-hub" aria-label="Secondary navigation">
        <a class="hub-card hub-card-primary" href={`${BASE}real-time/`}>
          <div class="hub-title">REAL-TIME</div>
          <div class="hub-desc">配信するときに使うページ</div>
        </a>

        <a class="hub-card hub-card-primary" href={`${BASE}contact/`}>
          <div class="hub-title">CONTACT</div>
          <div class="hub-desc">Lukia & Lucia（サイト作者）に連絡したい人はこちら</div>
        </a>

        <a class="hub-card hub-card-secondary" href={`${BASE}archive/`}>
          <div class="hub-title">ARCHIVE</div>
          <div class="hub-desc">
            過去の作品・ログが<br/>
            気が向いたら整理される場所。<br/>
            されないかもしれない。
          </div>
        </a>
      </div>
    </div>

<div class="observers-dock" aria-label="Creators">
  <a class="observer observer-lukia" href={`${BASE}lukia/`} aria-label="Lukia profile">
    <img src={`${BASE}images/lukia_cut.png`} alt="Lukia" loading="lazy" />
  </a>
  <a class="observer observer-lucia" href={`${BASE}lucia/`} aria-label="Lucia profile">
    <img src={`${BASE}images/lucia_cut.png`} alt="Lucia" loading="lazy" />
  </a>
</div>



  </section>
</Layout>

<script define:vars={{ BASE }}>
  document.addEventListener('DOMContentLoaded', () => {
    const trigger = document.getElementById('core-c-trigger');
    if (trigger) {
      const navigate = () => {
        window.location.href = `${BASE}c-of-observers/`;
      };
      
      trigger.addEventListener('click', navigate);
      trigger.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          navigate();
        }
      });
    }
  });
</script>
